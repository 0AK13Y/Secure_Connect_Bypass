import requests

API_KEY = "xxxxxxxxxxxxx" # Replace with your API KEY
NETWORK_ID = "xxxxxxxxxxxxx"  # Replace with your network ID
BASE_URL = f"https://api.meraki.com/api/v1/networks/{NETWORK_ID}/appliance/trafficShaping/vpnExclusions"



headers = {
    "Content-Type": "application/json",
    "Accept": "application/json",
    "X-Cisco-Meraki-API-Key": API_KEY
}

data = {
    "custom": [
        {"protocol": "any", "destination": "216.157.208.0/20"},
        {"protocol": "any", "destination": "209.206.48.0/20"},
        {"protocol": "any", "destination": "158.115.128.0/19"},
        {"protocol": "any", "destination": "3.145.238.128/27"},
        {"protocol": "any", "destination": "35.84.197.208/28"},
        {"protocol": "any", "destination": "35.84.197.224/28"},
        {"protocol": "any", "destination": "44.239.235.232/29"},
        {"protocol": "any", "destination": "174.129.105.183/32"},
        {"protocol": "any", "destination": "18.116.79.126/32"},
        {"protocol": "any", "destination": "18.117.64.128/32"},
        {"protocol": "any", "destination": "18.191.46.63/32"},
        {"protocol": "any", "destination": "18.218.26.94/32"},
        {"protocol": "any", "destination": "18.232.225.224/32"},
        {"protocol": "any", "destination": "18.233.90.226/32"},
        {"protocol": "any", "destination": "3.131.238.180/32"},
        {"protocol": "any", "destination": "3.131.55.63/32"},
        {"protocol": "any", "destination": "3.132.201.78/32"},
        {"protocol": "any", "destination": "3.133.18.220/32"},
        {"protocol": "any", "destination": "3.134.176.17/32"},
        {"protocol": "any", "destination": "3.19.44.88/32"},
        {"protocol": "any", "destination": "3.20.244.231/32"},
        {"protocol": "any", "destination": "3.21.254.195/32"},
        {"protocol": "any", "destination": "3.211.189.167/32"},
        {"protocol": "any", "destination": "34.211.191.214/32"},
        {"protocol": "any", "destination": "34.233.19.82/32"},
        {"protocol": "any", "destination": "34.233.190.223/32"},
        {"protocol": "any", "destination": "35.160.3.103/32"},
        {"protocol": "any", "destination": "35.162.47.8/32"},
        {"protocol": "any", "destination": "35.166.202.113/32"},
        {"protocol": "any", "destination": "35.167.74.121/32"},
        {"protocol": "any", "destination": "35.171.156.124/32"},
        {"protocol": "any", "destination": "35.82.131.220/32"},
        {"protocol": "any", "destination": "44.205.93.104/32"},
        {"protocol": "any", "destination": "44.218.235.21/32"},
        {"protocol": "any", "destination": "44.219.52.110/32"},
        {"protocol": "any", "destination": "52.12.243.90/32"},
        {"protocol": "any", "destination": "52.2.61.131/32"},
        {"protocol": "any", "destination": "52.204.128.250/32"},
        {"protocol": "any", "destination": "52.206.34.127/32"},
        {"protocol": "any", "destination": "52.43.255.209/32"},
        {"protocol": "any", "destination": "52.88.192.232/32"},
        {"protocol": "any", "destination": "52.89.116.72/32"},
        {"protocol": "any", "destination": "54.145.227.59/32"},
        {"protocol": "any", "destination": "54.157.101.160/32"},
        {"protocol": "any", "destination": "54.200.12.78/32"},
        {"protocol": "any", "destination": "54.209.32.202/32"},
        {"protocol": "any", "destination": "54.245.16.146/32"},
        {"protocol": "any", "destination": "54.68.157.8/32"},
        {"protocol": "any", "destination": "54.68.157.8/32"},
        {"protocol": "udp", "destination": "0.0.0.0/0", "port":"7351"},
        {"protocol": "udp", "destination": "15.197.199.165/32", "port":"443"},
        {"protocol": "udp", "destination": "3.33.194.96/32", "port":"443"},
        {"protocol": "udp", "destination": "184.72.42.45/32", "port":"443"},
        {"protocol": "udp", "destination": "54.241.87.236/32", "port":"443"},
        {"protocol": "udp", "destination": "20.165.33.254/32", "port":"443"},
        {"protocol": "tcp", "destination": "20.165.33.254/32", "port":"443"},
        {"protocol": "udp", "destination": "52.173.247.116/32", "port":"443"},
        {"protocol": "tcp", "destination": "52.173.247.116/32", "port":"443"},
        {"protocol": "udp", "destination": "3.123.165.7/32", "port":"443"},
        {"protocol": "udp", "destination": "52.28.203.234/32", "port":"443"},
        {"protocol": "udp", "destination": "3.8.107.216/32", "port":"443"},
        {"protocol": "udp", "destination": "13.41.40.26/32", "port":"443"},
        {"protocol": "tcp", "destination": "35.71.180.65/32", "port":"443"},
        {"protocol": "tcp", "destination": "52.223.54.170/32", "port":"443"},
        {"protocol": "tcp", "destination": "3.33.143.65/32", "port":"443"},
        {"protocol": "tcp", "destination": "15.197.160.161/32", "port":"443"}
    ],
    "majorApplications":[]
}

response = requests.put(BASE_URL, headers=headers, json=data)

print(response.status_code)
print(response.json())
